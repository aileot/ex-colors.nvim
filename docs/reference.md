# Reference

## Commands

### :ExColors[!]

Generate a new colorscheme to the directory
set in [colors_dir](#colors_dir) option,
and open the file in a new tab.
The name will be determined as the current value of `g:colors_name` prefixed
by _ex-_, e.g., _ex-habamax_ for _habamax_.

With `!` appended, overwrite the file `ex-{g:colors_name}.lua`,
ignoring all the filter and modifier options.
It is useful to know what you can get primarily,
and, once committed in git, to know
(not necessarily but with some git integration plugins like
[vim-fugitive][],
[gitsigns.nvim][],
etc.)
what definitions are filtered off, or converted.

Please note that some colorscheme plugins provide multiple flavors sharing
a single `g:colors_name`:

1. Given a colorscheme plugin _foobar.nvim_,

   - which provides 3 flavors:
     (_foobar-dark_,
     _foobar-light_,
     _foobar-dimmed_),

   - but `g:colors_name` is set to `"foobar"` each.

2. Execute `:colorscheme foobar-dark` anyhow in your vimrc.

3. Execute `:ExColors` in Command-line mode.

4. Then, the new colorscheme name generated by `ex-colors` could be
   not _ex-foobar-dark_,
   but _ex-foobar_.

## Options

### colors_dir

(type: `string`; default: `vim.fn.stdpath("config") .. "/colors"`)

The output directory path. The path should end with `/colors` on any path
included in `&runtimepath`.

### ignore_clear

(type: `boolean`; default: `true`)

If true, highlight definitions cleared by `:highlight clear` will not be
included in the output. See `:h highlight-clear` for details.

### omit_default

(type: `boolean`; default: `false`)

If true, omit `default` keys from the output highlight definitions.
See `:h highlight-default` for the details.

### relinker

(type: `fun(string): string|false`; default: `require("ex-colors.presets").recommended.relinker`)

This option is for _advanced users_ who find it worthwhile.

The callback function will get each highlight definition name, and
the function can change the highlight name in the output
as the following rules:

- If a string value is returned for the definition,
  the highlight definition will be renamed to the returned string value.
- If `false` is returned for the definition,
  the definition will NOT be in the output file.

Addition to that, the callback function is also applied to each `link`ed
highlight definition name.
(See `:help :highlight-link`)

It helps you eliminate obsolete, or deprecated, highlight definitions
in the output.

The [Cookbook](./cookbook.md) shows demonstrations.

### included_hlgroups

(type: `string[]`; default: `require("ex-colors.presets").recommended.included_hlgroups`)

Highlight group names which should be included in the output.
The [Cookbook](./cookbook.md) shows demonstrations.

### excluded_hlgroups

(type: `string[]`; default: `require("ex-colors.presets").recommended.excluded_hlgroups`)

Highlight group names which should be excluded in the output.
The [Cookbook](./cookbook.md) shows demonstrations.

### included_patterns

(type: `string[]`; default: `require("ex-colors.presets").recommended.excluded_hlgroups`)

Highlight group name Lua patterns which should be included in the output.
The [Cookbook](./cookbook.md) shows demonstrations.

### excluded_patterns

(type: `string[]`; default: `require("ex-colors.presets").recommended.excluded_patterns`)

Highlight group name patterns which should be excluded in the output.
The [Cookbook](./cookbook.md) shows demonstrations.

### autocmd_patterns

(type: `string[]`; default: `{}`)

Generate matched highlight definitions only on the autocmd event.

The [Cookbook](./cookbook.md) shows demonstrations.

### embedded_global_options

Vim global options (`&g:foobar` or `vim.go.foobar`) which should be also
embedded in the colorscheme output to be updated at the same time.

(type: `string[]`; default: `{
  "background"
}`)

### embedded_global_variables

(type: `string[]`; default: `{
    "terminal_color_0",
    "terminal_color_1",
    "terminal_color_2",
    "terminal_color_3",
    "terminal_color_4",
    "terminal_color_5",
    "terminal_color_6",
    "terminal_color_7",
    "terminal_color_8",
    "terminal_color_9",
    "terminal_color_10",
    "terminal_color_11",
    "terminal_color_12",
    "terminal_color_13",
    "terminal_color_14",
    "terminal_color_15",
}`)

Vim global variables (`g:foobar` or `vim.g.foobar`) which should be also
embedded in the colorscheme output to be updated at the same time.

[gitsigns.nvim]: https://github.com/lewis6991/gitsigns.nvim
[vim-fugitive]: https://github/tpope/vim-fugitive
